apply plugin: 'android-library'

android {
    compileSdkVersion 22
    buildToolsVersion "22.0.1"

    defaultConfig {
        minSdkVersion 19
        targetSdkVersion 22
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:22.2.0'
}

def buildOutputDir = "${project.rootDir}/build/outputs"
def sdkOutputDir = "${buildOutputDir}/outputjar"

/**
 * depends:compileDebugJava
 */
task demoJarRelease(type: Jar) {
    baseName = 'PassportSDK'
    destinationDir = new File(sdkOutputDir)
    from(new File("${project.rootDir}", 'app/build/intermediates/classes/release')) {
        include "**/com/baidu/sample/passportsdk/**/*.class"
        include "**/com/baidu/sample/passportsdk/*.class"
    }
}
demoJarRelease.dependsOn {
    tasks.findAll { task ->
        task.name == 'compileReleaseJava'
    }
}